appsrc format=time is-live=true do-timestamp=true name=src ! 
application/x-rtp,encoding-name=VP8-DRAFT-IETF-01 ! 
rtpjitterbuffer latency=100 ! 
rtpvp8depay ! 
vp8dec ! 

tee name=teein ! 
queue max-size-buffers=0 max-size-bytes=0 max-size-time=5000000000 ! 
videorate ! 
videoscale ! 
video/x-raw,framerate=30/1,width=${width},height=${height} !
vp8enc keyframe-max-dist=128 resize-allowed=true dropframe-threshold=25 max-quantizer=56 cpu-used=5 threads=4 deadline=1 qos=true ! 
matroskamux ! 
filesink location=logs/${prefix}-video-in.mkv 

teein. ! 
queue max-size-buffers=0 max-size-bytes=0 ! 
videoconvert ! 
${fx} ! 
videoconvert ! 
videorate ! 
videoscale ! 
video/x-raw,framerate=30/1,width=${width},height=${height} !
vp8enc keyframe-max-dist=128 resize-allowed=true dropframe-threshold=25 max-quantizer=56 cpu-used=5 threads=4 deadline=1 qos=true ! 

tee name=teeout ! 
queue max-size-buffers=0 max-size-bytes=0 max-size-time=5000000000 ! 
matroskamux ! 
filesink location=logs/${prefix}-video-out.mkv 

teeout. ! 
queue max-size-buffers=0 max-size-bytes=0 ! 
rtpvp8pay !
appsink name=sink qos=true