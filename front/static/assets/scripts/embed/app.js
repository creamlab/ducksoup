(()=>{var c=e=>Boolean(parseInt(e)),o=(e,n)=>{let s=window.location.search.substring(1).split("&");for(let d=0;d<s.length;d++){let r=s[d].split("=");if(decodeURIComponent(r[0])==e){let t=decodeURIComponent(r[1]);return n?n(t):t}}},l=e=>encodeURI(btoa(JSON.stringify(e))),m=async()=>{let e=o("room"),n=o("uid"),i=o("name"),s=o("proc",c),d=o("h264",c),r=o("duration",t=>parseInt(t,10));if(typeof e=="undefined"||typeof n=="undefined"||typeof i=="undefined"||typeof s=="undefined"||isNaN(r))document.getElementById("error").classList.remove("d-none"),document.getElementById("embed").classList.add("d-none");else{let t={room:e,uid:n,name:i,proc:s,duration:r,h264:d};document.getElementById("embed").src=`/1on1/?params=${l(t)}`}};document.addEventListener("DOMContentLoaded",m);var a=e=>{document.getElementById("stopped-message").innerHTML=e,document.getElementById("stopped").classList.remove("d-none"),document.getElementById("embed").classList.add("d-none")};window.addEventListener("message",e=>{if(e.origin===window.location.origin)if(e.data.type==="finish"){let n="Conversation termin\xE9e, les fichiers suivant ont \xE9t\xE9 enregistr\xE9s:<br/><br/>";n+=e.data.payload.replaceAll(";","<br/>"),a(n)}else e.data.type==="error-full"?a("Connexion refus\xE9e (salle compl\xE8te)"):e.data.type==="error-duplicate"?a("Connexion refus\xE9e (d\xE9j\xE0 connect\xE9-e)"):e.data.type==="disconnected"?a("Connexion perdue"):e.data.type==="error"&&a("Erreur")});})();
